<div class="task-container" *ngIf="tasksForEdit$ | async as tasksForEdit">
  <ng-container *ngIf="tasksForEdit.length === 0; else tasksTemplate"></ng-container>
  <ng-template #tasksTemplate>
    <div class="header">
      Tasks ({{tasksForEdit.length}})
    </div>
    <table>
      <thead>
        <th style="width: 100px;">#</th>
        <th>
          Description
        </th>
        <th style="width: 100px;">Commands</th>
      </thead>
      <tbody>
        <tr *ngFor="let task of tasksForEdit; let i = index">
          <td style="vertical-align: top;">
            {{ i + 1 }}
          </td>
  
          <td>
            <div class="task-display">
              <div *ngIf="!task.isEditing; else isEditingTemplate" class="task-display-description" style="padding: 10px 0px;background-color: aliceblue;">
                {{ task.description }} => {{task.isEditing}}
              </div>
              <ng-template #isEditingTemplate>
                {{ task.description }} => {{task.isEditing}}
              </ng-template>
              <div class="sub-task-container" style="display: flex;align-items: center;" *ngFor="let subtask of task.subTasks">
                <mat-icon>label_important</mat-icon>
                <div style="flex: 1;margin-left: 10px;">
                  {{ subtask.description }}
                </div>
                <div style="display: flex;">
                  <button type="button" mat-icon-button color="accent">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button type="button" mat-icon-button color="accent">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </div>
            </div>
          </td>
  
          <td style="vertical-align: top;">
            <ng-container *ngIf="!task.isEditing; else isEditingCommand">
              <div style="display: flex;">
                <button type="button" mat-icon-button color="primary" (click)="editTaskDescription(i)">
                  <mat-icon>save</mat-icon>
                </button>
              </div>
            </ng-container>
            <ng-template #isEditingCommand>
              <div style="display: flex;">
                <button type="button" mat-icon-button color="primary" (click)="editTaskDescription(i)">
                  <mat-icon>edit</mat-icon>
                </button>
                <button type="button" mat-icon-button color="primary">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </ng-template>
          </td>
        </tr>
      </tbody>
    </table>
  </ng-template>

</div>